process Test2 =
{

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # tracker geometry
  #include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # strip parameter estimator service for SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
  }

#  service = Timing {}

  include "SimGeneral/HepPDTESSource/data/pdt.cfi"

  source = FlatRandomPtGunSource
  {
    untracked uint32 firstRun = 1
    untracked int32 maxEvents = 5000
    untracked PSet PGunParameters =
    {
      # you can request more than 1 particle
      untracked vint32  PartID = {13}
      untracked double MinEta = -2.5
      untracked double MaxEta =  2.5
      untracked double MinPhi = -3.14159265358979323846 # in radians
      untracked double MaxPhi =  3.14159265358979323846
      untracked double MinPt  =  9.99
      untracked double MaxPt  = 10.01
    }
    untracked int32 Verbosity = 1 # set to 1 (or greater)  for printouts
  }

  # include geant4 simulation
  include "SimG4Core/Application/data/SimG4Object.cfi"
  #replace SimG4Object.Physics.type = "SimG4Core/Physics/DummyPhysics"
  #replace SimG4Object.Physics.DummyEMPhysics = true

#  source = PoolSource 
#  { 
#    untracked vstring fileNames = {"file:sim+local+global10GeV.root"}
#    untracked int32 maxEvents = -1
#  }

  # include SiStripDigitizer
  include "SimTracker/SiStripDigitizer/data/SiStripDigi.cfi"

  # include SiPixelDigitizer
  include "SimTracker/SiPixelDigitizer/data/PixelDigi.cfi"

  module mix = MixingModule
  {
     int32 bunchspace = 25
  }

  # include  pixClust
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"

  # include SiStripClusterizer
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"

  #include pixRecHitConverter
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi" 

  # include SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"

  # GlobalPixelSeedGenerator
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"

  # RoadSearchSeedFinder
  include "RecoTracker/RoadSearchSeedFinder/data/RoadSearchSeeds.cff"

  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"

  # RoadSearchCloudMaker
  include "RecoTracker/RoadSearchCloudMaker/data/RawRoadSearchClouds.cff"

  # RoadSearchCloudMaker
  include "RecoTracker/RoadSearchCloudCleaner/data/CleanRoadSearchClouds.cff"

  # RoadSearchTrackCandidateMaker
  include "RecoTracker/RoadSearchTrackCandidateMaker/data/RoadSearchTrackCandidates.cff"

  # CTF analytical track fit
  include "RecoTracker/TrackProducer/data/CTFFinalFitAnalytical.cff"

  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  # RS analytical track fit
  include "RecoTracker/TrackProducer/data/RSFinalFitAnalytical.cff"

  # RS track fit with material 
  include "RecoTracker/TrackProducer/data/RSFinalFitWithMaterial.cff"

  module TrackValidatorCTF = TrackValidator {
         string label = "ctfWithMaterialTracks"
	 string sim   = "g4SimHits"
	 string out   = "histo10GeV.root"
	 double min   = 0
	 double max   = 2.5
	 int32  nint  = 20
  }

  module TrackValidatorRS = TrackValidator {
         string label = "rsWithMaterialTracks"
	 string sim   = "g4SimHits"
	 string out   = "histo10GeV.root"
	 double min   = 0
	 double max   = 2.5
	 int32  nint  = 20
  }

  module Out = PoolOutputModule
  {
    untracked string fileName = "sim+local+global10GeV.root"
  }

#  module Out = AsciiOutputModule {}

  sequence sim = 
  {
    g4SimHits,mix,
    siStripDigis,
    siPixelDigis
  }

  sequence localreco = 
  {
    siPixelClusters,
    siStripClusters,
    siPixelRecHits,
    siStripMatchedRecHits
  }

  sequence ckf = 
  {
    globalMixedSeeds,
    ckfTrackCandidates,
    ctfAnalyticalTracks,
    ctfWithMaterialTracks
  }

  sequence rs = 
  {
    roadSearchSeeds,
    rawRoadSearchClouds,
    cleanRoadSearchClouds,
    rsTrackCandidates,
    rsAnalyticalTracks,
    rsWithMaterialTracks
  }

  sequence val = 
  {
    TrackValidatorCTF,
    TrackValidatorRS
  }

  path p = 
  {
    sim,
    localreco,
    ckf,
    rs,
    val
  }

  endpath e =
  {
    Out
  }
}

