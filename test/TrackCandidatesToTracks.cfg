process RoadSearch = 
{

  # initialize  MessageLogger
  include "RecoTracker/RoadSearchCloudMaker/test/messages.cfg"
 
  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  source = PoolSource 
  { 
    untracked vstring fileNames = {"file:CleanToTrackCandidates.root"}
    untracked int32 maxEvents = 100
  }

#
# Not using these .... but you could!
#

#  es_module p1 = AnalyticalPropagatorESProducer
#  {
#    string ComponentName = "AnalyticalPropagator"   
#    string PropagationDirection = "alongMomentum"
#  }

#  es_module p2 = AnalyticalPropagatorESProducer
#  {
#    string ComponentName = "AnalyticalPropagatorOpposite"   
#    string PropagationDirection = "oppositeToMomentum"
#  }


  
  es_module = KFUpdatorESProducer
  {
    string ComponentName = "KFUpdator"   
  }

  es_module = Chi2MeasurementEstimatorESProducer
  {
    string ComponentName = "Chi2"   
    double MaxChi2 = 1. 
    double nSigma = 3.
  }

  es_module = KFTrajectoryFitterESProducer 
  {
    string ComponentName = "KFFitter"   
    string  Propagator = "PropagatorWithMaterial" 
    string Updator = "KFUpdator"
    string Estimator = "Chi2"
  }

  es_module = KFTrajectorySmootherESProducer 
  {
    string ComponentName = "KFSmoother"   
    string Propagator = "PropagatorWithMaterialOpposite" 
    string Updator = "KFUpdator"
    string Estimator = "Chi2"

  }

  es_module = KFFittingSmootherESProducer 
  {
    string ComponentName = "KFFittingSmoother"   
    string  Fitter = "KFFitter" 
    string Smoother = "KFSmoother"

  }

  es_module mat1 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterial"
    string PropagationDirection = "alongMomentum"	
    double Mass = 0.105
  }
  es_module mat2 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterialOpposite"
    string PropagationDirection = "oppositeToMomentum"	
    double Mass = 0.105
  }

  
  module trackp = TrackProducer 
  {
    string Fitter = "KFFittingSmoother"   
    string Propagator = "PropagatorWithMaterial" 
    string src = "trackcandidates"
  }

  module AsciiOutput = AsciiOutputModule {}

  module out = PoolOutputModule 
  {
    untracked string fileName = "TrackCandidatesToTracks.root"
  }

  path p = 
  {
    trackp
  }
  
  endpath e = 
  {
    AsciiOutput, out
  }
}
