process Refit = 
{
    
    # initialize  MessageLogger
    service = MessageLogger
    {
	untracked vstring destinations = {"cout"}
	untracked vstring categories    = { "TrackFitters","TrackProducer" }
	untracked PSet cout =
	{
	    untracked string threshold = "DEBUG"
	    untracked PSet default   = { untracked int32 limit = 0  }
	    untracked PSet TrackFitters   = { untracked int32 limit = 0  }
	    untracked PSet TrackProducer   = { untracked int32 limit = -1  }	    
	}
	untracked vstring debugModules = {"TrackRefitter","ctfWithMaterialTracks"} 
    }
    
    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource 
    { 
	untracked vstring fileNames = {"file:Tracks.root"}
    }
    
    # track refit with material
    include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
    #replace TrackRefitter.src = "test"

    #replace TrackRefitter.constraint = "momentum"
    #module test = MomentumConstraintProducer{InputTag src = ctfWithMaterialTracks}

    #replace TrackRefitter.constraint = "vertex"
    #module test = VertexConstraintProducer{InputTag src = ctfWithMaterialTracks}
    
    module out = PoolOutputModule 
    {
	untracked string fileName = "RefittedTracks.root"
    }
    
    path p = 
    {
	#ctfWithMaterialTracks
	#test, 
	TrackRefitter
    }
    
    endpath e = 
    {
	out
    }
}
