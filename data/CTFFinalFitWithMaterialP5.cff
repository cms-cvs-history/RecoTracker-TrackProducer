# magnetic field
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# cms geometry
#include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# tracker numbering
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

# KFUpdatoerESProducer
include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"

# Chi2MeasurementEstimatorESProducer
include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"

# PropagatorWithMaterialESProducer
es_module RungeKuttaTrackerPropagator = MaterialPropagator from "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"
replace RungeKuttaTrackerPropagator.ComponentName = "RungeKuttaTrackerPropagator"
replace RungeKuttaTrackerPropagator.useRungeKutta = true


# KFTrajectoryFitterESProducer
es_module FitterRK = KFTrajectoryFitter from "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"
replace FitterRK.ComponentName = "FitterRK"
replace FitterRK.Propagator = "RungeKuttaTrackerPropagator"

# KFTrajectorySmootherESProducer
es_module SmootherRK = KFTrajectorySmoother from "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"
replace SmootherRK.ComponentName = "SmootherRK"
replace SmootherRK.Propagator = "RungeKuttaTrackerPropagator"

# KFFittingSmootherESProducer
es_module FittingSmootherRKP5 = KFFittingSmoother from "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"
replace FittingSmootherRKP5.ComponentName = "FittingSmootherRKP5"
replace FittingSmootherRKP5.Fitter = "FitterRK"
replace FittingSmootherRKP5.Smoother = "SmootherRK"
replace FittingSmootherRKP5.MinNumberOfHits = 4	

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"
# stripCPE
include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
# pixelCPE
include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
#TransientTrackingBuilder
include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"


# TrackProducer
module ctfWithMaterialTracksP5 = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace ctfWithMaterialTracksP5.src = "ckfTrackCandidatesP5"
replace ctfWithMaterialTracksP5.Fitter = "FittingSmootherRKP5"
